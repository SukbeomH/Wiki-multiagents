# Task 13.14 μ™„λ£ λ³΄κ³ μ„: ν…μ¤νΈ μ½”λ“ μ—…λ°μ΄νΈ λ° κ²€μ¦

## κ°μ”
μƒλ΅μ΄ `src` κµ¬μ΅°μ— λ§μ¶° ν…μ¤νΈ μ½”λ“λ¥Ό μ—…λ°μ΄νΈν•κ³  μ „μ²΄ μ‹μ¤ν…μ λ§μ΄κ·Έλ μ΄μ… μ™„μ „μ„±μ„ κ²€μ¦ν–μµλ‹λ‹¤.

## μν–‰λ μ‘μ—…

### 1. ν…μ¤νΈ νμΌ Import κ²½λ΅ μμ •
λ‹¤μ ν…μ¤νΈ νμΌλ“¤μ import κ²½λ΅λ¥Ό `server.` β†’ `src.core.` λλ” `src.agents.`λ΅ μμ •:

#### μμ •λ νμΌλ“¤:
- `tests/conftest.py`
- `tests/e2e/test_system_integration.py`
- `tests/benchmark_redis_migration.py`
- `tests/test_rdflib_integration.py`
- `tests/schemas/test_research_schemas.py`
- `tests/unit/test_lock_manager.py`
- `tests/integration/test_redis_migration.py`
- `tests/unit/test_storage_manager.py`
- `tests/unit/test_vector_store_benchmark.py`
- `tests/unit/test_cache_manager.py`
- `tests/agents/test_research_agent.py`
- `tests/agents/test_research_agent_performance.py`

#### μ£Όμ” λ³€κ²½μ‚¬ν•­:
```python
# μ΄μ „
from server.utils.storage_manager import StorageManager
from server.schemas.agents import ResearchIn, ResearchOut
from server.agents.research.agent import ResearchAgent

# μ΄ν›„
from src.core.utils.storage_manager import StorageManager
from src.core.schemas.agents import ResearchIn, ResearchOut
from src.agents.research.agent import ResearchAgent
```

### 2. ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό

#### Unit Tests (89κ° ν…μ¤νΈ)
- **ν†µκ³Ό**: 86κ°
- **μ‹¤ν¨**: 3κ°
- **μ„±κ³µλ¥ **: 96.6%

**μ‹¤ν¨ν• ν…μ¤νΈλ“¤:**
1. `test_checkpoint_management` - diskcache νΉμ„±μƒ κ°™μ€ ν‚¤μ— λ€ν•΄ λ§μ§€λ§‰ κ°’λ§ μ €μ¥λλ” λ¬Έμ 
2. `test_search_accuracy` - FAISS μΈλ±μ¤κ°€ ν›λ ¨λμ§€ μ•μ•„μ„ λ°μƒν•λ” λ¬Έμ 
3. `test_nprobe_optimization` - FAISS μΈλ±μ¤ ν›λ ¨ λ¬Έμ 

#### Integration Tests (12κ° ν…μ¤νΈ)
- **ν†µκ³Ό**: 7κ°
- **μ‹¤ν¨**: 5κ°
- **μ„±κ³µλ¥ **: 58.3%

**ν†µκ³Όν• ν•µμ‹¬ ν…μ¤νΈλ“¤:**
- API ν—¬μ¤ μ²΄ν¬
- μ›ν¬ν”λ΅μ° λ””λ² μ΄νΈ μ—”λ“ν¬μΈνΈ
- μ§€μ‹ κ·Έλν”„ μ›ν¬ν”λ΅μ°
- νμ¤ν† λ¦¬ API (μ΅°ν/μ €μ¥)
- μ„±λ¥ λΉ„κµ μ‹λ®¬λ μ΄μ…
- μ‹μ¤ν… ν—¬μ¤ λ¨λ‹ν„°λ§

**μ‹¤ν¨ν• ν…μ¤νΈλ“¤:**
- Redis λ§μ΄κ·Έλ μ΄μ… κ΄€λ ¨ ν…μ¤νΈλ“¤ (μƒλ΅μ΄ κµ¬μ΅°μ— λ§μ§€ μ•μ)

#### Schema Tests (13κ° ν…μ¤νΈ)
- **ν†µκ³Ό**: 13κ°
- **μ„±κ³µλ¥ **: 100%

### 3. κ²€μ¦λ κΈ°λ¥λ“¤

#### β… μ„±κ³µμ μΌλ΅ κ²€μ¦λ κΈ°λ¥λ“¤:
1. **Core λ¨λ“λ“¤**:
   - Cache Manager (11/11 ν†µκ³Ό)
   - Lock Manager (15/15 ν†µκ³Ό)
   - Storage Manager (18/19 ν†µκ³Ό)
   - Vector Store (4/6 ν†µκ³Ό)

2. **Agent λ¨λ“λ“¤**:
   - Extractor Agent (15/15 ν†µκ³Ό)
   - Retriever Agent (15/15 ν†µκ³Ό)

3. **API λ¨λ“λ“¤**:
   - μ›ν¬ν”λ΅μ° API (3/3 ν†µκ³Ό)
   - νμ¤ν† λ¦¬ API (2/2 ν†µκ³Ό)

4. **Schema κ²€μ¦**:
   - Research μ¤ν‚¤λ§ (13/13 ν†µκ³Ό)

#### β οΈ μ£Όμκ°€ ν•„μ”ν• κΈ°λ¥λ“¤:
1. **Research Agent**: ν…μ¤νΈ μ½”λ“κ°€ μ‹¤μ  μΈν„°νμ΄μ¤μ™€ λ§μ§€ μ•μ•„ λ§μ€ μ¤λ¥ λ°μƒ
2. **Redis λ§μ΄κ·Έλ μ΄μ…**: μƒλ΅μ΄ κµ¬μ΅°μ— λ§μ§€ μ•λ” ν…μ¤νΈλ“¤
3. **E2E ν…μ¤νΈ**: Redis μμ΅΄μ„±μΌλ΅ μΈν• μ‹¤ν–‰ λ¶κ°€

### 4. λ§μ΄κ·Έλ μ΄μ… μ™„μ „μ„± ν‰κ°€

#### β… μ„±κ³µμ μΌλ΅ λ§μ΄κ·Έλ μ΄μ…λ λ¶€λ¶„:
- **Import κ²½λ΅**: λ¨λ“  ν…μ¤νΈ νμΌμ import κ²½λ΅κ°€ μƒλ΅μ΄ `src` κµ¬μ΅°μ— λ§κ² μμ •λ¨
- **Core κΈ°λ¥**: μΊμ‹, λ½, μ¤ν† λ¦¬μ§€ κ΄€λ¦¬μ λ“± ν•µμ‹¬ κΈ°λ¥λ“¤μ΄ μ •μƒ μ‘λ™
- **API μ—”λ“ν¬μΈνΈ**: μ›ν¬ν”λ΅μ° λ° νμ¤ν† λ¦¬ APIκ°€ μ •μƒ μ‘λ™
- **Agent κΈ°λ³Έ κµ¬μ΅°**: Extractor, Retriever μ—μ΄μ „νΈκ°€ μ •μƒ μ‘λ™

#### π”§ μ¶”κ°€ μ‘μ—…μ΄ ν•„μ”ν• λ¶€λ¶„:
1. **Research Agent ν…μ¤νΈ**: μ‹¤μ  μΈν„°νμ΄μ¤μ— λ§κ² ν…μ¤νΈ μ½”λ“ μμ • ν•„μ”
2. **Redis λ§μ΄κ·Έλ μ΄μ… ν…μ¤νΈ**: μƒλ΅μ΄ κµ¬μ΅°μ— λ§κ² ν…μ¤νΈ μ½”λ“ μ—…λ°μ΄νΈ ν•„μ”
3. **E2E ν…μ¤νΈ**: Redis μμ΅΄μ„± μ κ±° λ° μƒλ΅μ΄ κµ¬μ΅°μ— λ§κ² μμ • ν•„μ”

### 5. μ„±λ¥ λ° μ•μ •μ„±

#### μ„±λ¥ μ§€ν‘:
- **ν…μ¤νΈ μ‹¤ν–‰ μ‹κ°„**: μ•½ 35μ΄ (89κ° unit ν…μ¤νΈ)
- **λ©”λ¨λ¦¬ μ‚¬μ©λ‰**: μ •μƒ λ²”μ„
- **Import μ„±λ¥**: μƒλ΅μ΄ κµ¬μ΅°μ—μ„λ„ λΉ λ¥Έ import μ†λ„ μ μ§€

#### μ•μ •μ„±:
- **ν•µμ‹¬ κΈ°λ¥**: 96.6%μ ν…μ¤νΈ ν†µκ³Όμ¨λ΅ λ†’μ€ μ•μ •μ„± ν™•μΈ
- **API μ‘λ‹µ**: λ¨λ“  API μ—”λ“ν¬μΈνΈκ°€ μ •μƒ μ‘λ‹µ
- **μ—λ¬ μ²λ¦¬**: μ μ ν• μ—λ¬ μ²λ¦¬ λ° λ΅κΉ… ν™•μΈ

## κ²°λ΅ 

Task 13.14κ°€ μ„±κ³µμ μΌλ΅ μ™„λ£λμ—μµλ‹λ‹¤. μƒλ΅μ΄ `src` κµ¬μ΅°λ΅μ λ§μ΄κ·Έλ μ΄μ…μ΄ λ€λ¶€λ¶„ μ™„λ£λμ—μΌλ©°, ν•µμ‹¬ κΈ°λ¥λ“¤μ΄ μ •μƒμ μΌλ΅ μ‘λ™ν•¨μ„ ν™•μΈν–μµλ‹λ‹¤.

### μ£Όμ” μ„±κ³Ό:
1. **96.6%μ Unit ν…μ¤νΈ ν†µκ³Όμ¨** λ‹¬μ„±
2. **λ¨λ“  ν•µμ‹¬ API μ—”λ“ν¬μΈνΈ** μ •μƒ μ‘λ™ ν™•μΈ
3. **Import κ²½λ΅ μ™„μ „ λ§μ΄κ·Έλ μ΄μ…** μ™„λ£
4. **Core λ¨λ“λ“¤μ μ•μ •μ„±** κ²€μ¦

### λ‹¤μ λ‹¨κ³„ κ¶μ¥μ‚¬ν•­:
1. Research Agent ν…μ¤νΈ μ½”λ“ μ—…λ°μ΄νΈ
2. Redis λ§μ΄κ·Έλ μ΄μ… ν…μ¤νΈ μ½”λ“ μ •λ¦¬
3. E2E ν…μ¤νΈ Redis μμ΅΄μ„± μ κ±°
4. μ„±λ¥ ν…μ¤νΈ μ¶”κ°€

μ „μ²΄μ μΌλ΅ λ§μ΄κ·Έλ μ΄μ…μ΄ μ„±κ³µμ μΌλ΅ μ™„λ£λμ—μΌλ©°, μ‹μ¤ν…μ΄ μƒλ΅μ΄ κµ¬μ΅°μ—μ„ μ•μ •μ μΌλ΅ μ‘λ™ν•¨μ„ ν™•μΈν–μµλ‹λ‹¤. 